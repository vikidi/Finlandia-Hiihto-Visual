<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Finlandia Hiihto: Express Handlebars</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Finlandia Hiihto
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Express Handlebars </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://gitter.im/ericf/express-handlebars?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><object type="image/svg+xml" data="https://badges.gitter.im/ericf/express-handlebars.svg" style="pointer-events: none;">Join the chat at https://gitter.im/ericf/express-handlebars</object></a></p>
<p>A <a href="https://github.com/wycats/handlebars.js">Handlebars</a> view engine for <a href="https://github.com/visionmedia/express">Express</a> which doesn't suck.</p>
<p><a href="https://www.npmjs.org/package/express-handlebars"><object type="image/svg+xml" data="https://img.shields.io/npm/v/express-handlebars.svg?style=flat-square" style="pointer-events: none;">npm version</object></a> <a href="https://david-dm.org/ericf/express-handlebars"><object type="image/svg+xml" data="https://img.shields.io/david/ericf/express-handlebars.svg?style=flat-square" style="pointer-events: none;">dependency status</object></a></p>
<p>**This package used to be named <code>express3-handlebars</code>. The previous <code>express-handlebars</code> package by @jneen can be found <a href="https://github.com/jneen/express-handlebars">here</a>.**</p>
<h1><a class="anchor" id="autotoc_md3104"></a>
Goals &amp; Design</h1>
<p>I created this project out of frustration with the existing Handlebars view engines for Express. As of version 3.x, Express got out of the business of being a generic view engine — this was a great decision — leaving developers to implement the concepts of layouts, partials, and doing file I/O for their template engines of choice.</p>
<h2><a class="anchor" id="autotoc_md3105"></a>
Goals and Features</h2>
<p>After building a half-dozen Express apps, I developed requirements and opinions about what a Handlebars view engine should provide and how it should be implemented. The following is that list:</p>
<ul>
<li>Add back the concept of "layout", which was removed in Express 3.x.</li>
<li>Add back the concept of "partials" via Handlebars' partials mechanism.</li>
<li>Support a directory of partials; e.g., <code>{{&gt; foo/bar}}</code> which exists on the file system at <code>views/partials/foo/bar.handlebars</code>, by default.</li>
<li>Smart file system I/O and template caching. When in development, templates are always loaded from disk. In production, raw files and compiled templates are cached, including partials.</li>
<li>All async and non-blocking. File system I/O is slow and servers should not be blocked from handling requests while reading from disk. I/O queuing is used to avoid doing unnecessary work.</li>
<li>Ability to easily precompile templates and partials for use on the client, enabling template sharing and reuse.</li>
<li>Ability to use a different Handlebars module/implementation other than the Handlebars npm package.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3106"></a>
Package Design</h2>
<p>This package was designed to work great for both the simple and complex use cases. I <em>intentionally</em> made sure the full implementation is exposed and is easily overridable.</p>
<p>The package exports a function which can be invoked with no arguments or with a <code>config</code> object and it will return a function (closed over sensible defaults) which can be registered with an Express app. It's an engine factory function.</p>
<p>This exported engine factory has two properties which expose the underlying implementation:</p>
<ul>
<li><code>ExpressHandlebars()</code>: The constructor function which holds the internal implementation on its <code>prototype</code>. This produces instance objects which store their configuration, <code>compiled</code> and <code>precompiled</code> templates, and expose an <code>engine()</code> function which can be registered with an Express app.</li>
<li><code>create()</code>: A convenience factory function for creating <code>ExpressHandlebars</code> instances.</li>
</ul>
<p>An instance-based approach is used so that multiple <code>ExpressHandlebars</code> instances can be created with their own configuration, templates, partials, and helpers.</p>
<h1><a class="anchor" id="autotoc_md3107"></a>
Installation</h1>
<p>Install using npm:</p>
<div class="fragment"><div class="line">$ npm install express-handlebars</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3108"></a>
Usage</h1>
<p>This view engine uses sensible defaults that leverage the "Express-way" of structuring an app's views. This makes it trivial to use in basic apps:</p>
<h2><a class="anchor" id="autotoc_md3109"></a>
Basic Usage</h2>
<p><b>Directory Structure:</b></p>
<div class="fragment"><div class="line">.</div>
<div class="line">├── app.js</div>
<div class="line">└── views</div>
<div class="line">    ├── home.handlebars</div>
<div class="line">    └── layouts</div>
<div class="line">        └── main.handlebars</div>
<div class="line"> </div>
<div class="line">2 directories, 3 files</div>
</div><!-- fragment --><p><b>app.js:</b></p>
<p>Creates a super simple Express app which shows the basic way to register a Handlebars view engine using this package.</p>
<div class="fragment"><div class="line">var express = require(&#39;express&#39;);</div>
<div class="line">var exphbs  = require(&#39;express-handlebars&#39;);</div>
<div class="line"> </div>
<div class="line">var app = express();</div>
<div class="line"> </div>
<div class="line">app.engine(&#39;handlebars&#39;, exphbs());</div>
<div class="line">app.set(&#39;view engine&#39;, &#39;handlebars&#39;);</div>
<div class="line"> </div>
<div class="line">app.get(&#39;/&#39;, function (req, res) {</div>
<div class="line">    res.render(&#39;home&#39;);</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.listen(3000);</div>
</div><!-- fragment --><p><b>views/layouts/main.handlebars:</b></p>
<p>The main layout is the HTML page wrapper which can be reused for the different views of the app. <code>{{{body}}}</code> is used as a placeholder for where the main content should be rendered.</p>
<div class="fragment"><div class="line">&lt;!DOCTYPE html&gt;</div>
<div class="line">&lt;html&gt;</div>
<div class="line">&lt;head&gt;</div>
<div class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</div>
<div class="line">    &lt;title&gt;Example App&lt;/title&gt;</div>
<div class="line">&lt;/head&gt;</div>
<div class="line">&lt;body&gt;</div>
<div class="line"> </div>
<div class="line">    {{{body}}}</div>
<div class="line"> </div>
<div class="line">&lt;/body&gt;</div>
<div class="line">&lt;/html&gt;</div>
</div><!-- fragment --><p><b>views/home.handlebars:</b></p>
<p>The content for the app's home view which will be rendered into the layout's <code>{{{body}}}</code>.</p>
<div class="fragment"><div class="line">&lt;h1&gt;Example App: Home&lt;/h1&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3110"></a>
Running the Example</h3>
<p>The above example is bundled in this package's <a href="https://github.com/ericf/express-handlebars/tree/master/examples">examples directory</a>, where it can be run by:</p>
<div class="fragment"><div class="line">$ cd examples/basic/</div>
<div class="line">$ npm install</div>
<div class="line">$ npm start</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3111"></a>
Using Instances</h2>
<p>Another way to use this view engine is to create an instance(s) of <code>ExpressHandlebars</code>, allowing access to the full API:</p>
<p>``&lsquo;javascript var express = require('express&rsquo;); var exphbs = require('express-handlebars');</p>
<p>var app = express(); var hbs = exphbs.create({ /* config */ });</p>
<p>// Register <code>hbs.engine</code> with the Express app. app.engine('handlebars', hbs.engine); app.set('view engine', 'handlebars');</p>
<p>// ...still have a reference to <code>hbs</code>, on which methods like <code>loadPartials()</code> // can be called. </p><div class="fragment"><div class="line">**Note:** The [Advanced Usage][] example demonstrates how `ExpressHandlebars` instances can be leveraged.</div>
<div class="line"> </div>
<div class="line">### Template Caching</div>
<div class="line"> </div>
<div class="line">This view engine uses a smart template caching strategy. In development, templates will always be loaded from disk, i.e., no caching. In production, raw files and compiled Handlebars templates are aggressively cached.</div>
<div class="line"> </div>
<div class="line">The easiest way to control template/view caching is through Express&#39; [view cache setting][]:</div>
<div class="line"> </div>
<div class="line">```javascript</div>
<div class="line">app.enable(&#39;view cache&#39;);</div>
</div><!-- fragment --><p>Express enables this setting by default when in production mode, i.e.:</p>
<div class="fragment"><div class="line">process.env.NODE_ENV === &quot;production&quot;</div>
</div><!-- fragment --><p><b>Note:</b> All of the public API methods accept <code>options.cache</code>, which gives control over caching when calling these methods directly.</p>
<h2><a class="anchor" id="autotoc_md3112"></a>
Layouts</h2>
<p>A layout is simply a Handlebars template with a <code>{{{body}}}</code> placeholder. Usually it will be an HTML page wrapper into which views will be rendered.</p>
<p>This view engine adds back the concept of "layout", which was removed in Express 3.x. It can be configured with a path to the layouts directory, by default it's set to relative to <code>express settings.view</code> + <code>layouts/</code></p>
<p>There are two ways to set a default layout: configuring the view engine's <code>defaultLayout</code> property, or setting <a href="http://expressjs.com/api.html#app.locals">Express locals</a> <code>app.locals.layout</code>.</p>
<p>The layout into which a view should be rendered can be overridden per-request by assigning a different value to the <code>layout</code> request local. The following will render the "home" view with no layout:</p>
<div class="fragment"><div class="line">app.get(&#39;/&#39;, function (req, res, next) {</div>
<div class="line">    res.render(&#39;home&#39;, {layout: false});</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md3113"></a>
Helpers</h2>
<p>Helper functions, or "helpers" are functions that can be <a href="https://github.com/wycats/handlebars.js/#registering-helpers">registered with Handlebars</a> and can be called within a template. Helpers can be used for transforming output, iterating over data, etc. To keep with the spirit of <em>logic-less</em> templates, helpers are the place where logic should be defined.</p>
<p>Handlebars ships with some <a href="http://handlebarsjs.com/#builtins">built-in helpers</a>, such as: <code>with</code>, <code>if</code>, <code>each</code>, etc. Most application will need to extend this set of helpers to include app-specific logic and transformations. Beyond defining global helpers on <code>Handlebars</code>, this view engine supports <code>ExpressHandlebars</code> instance-level helpers via the <code>helpers</code> configuration property, and render-level helpers via <code>options.helpers</code> when calling the <code>render()</code> and <code>renderView()</code> methods.</p>
<p>The following example shows helpers being specified at each level:</p>
<p><b>app.js:</b></p>
<p>Creates a super simple Express app which shows the basic way to register <code>ExpressHandlebars</code> instance-level helpers, and override one at the render-level.</p>
<div class="fragment"><div class="line">var express = require(&#39;express&#39;);</div>
<div class="line">var exphbs  = require(&#39;express-handlebars&#39;);</div>
<div class="line"> </div>
<div class="line">var app = express();</div>
<div class="line"> </div>
<div class="line">var hbs = exphbs.create({</div>
<div class="line">    // Specify helpers which are only registered on this instance.</div>
<div class="line">    helpers: {</div>
<div class="line">        foo: function () { return &#39;FOO!&#39;; },</div>
<div class="line">        bar: function () { return &#39;BAR!&#39;; }</div>
<div class="line">    }</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.engine(&#39;handlebars&#39;, hbs.engine);</div>
<div class="line">app.set(&#39;view engine&#39;, &#39;handlebars&#39;);</div>
<div class="line"> </div>
<div class="line">app.get(&#39;/&#39;, function (req, res, next) {</div>
<div class="line">    res.render(&#39;home&#39;, {</div>
<div class="line">        showTitle: true,</div>
<div class="line"> </div>
<div class="line">        // Override `foo` helper only for this rendering.</div>
<div class="line">        helpers: {</div>
<div class="line">            foo: function () { return &#39;foo.&#39;; }</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">app.listen(3000);</div>
</div><!-- fragment --><p><b>views/home.handlebars:</b></p>
<p>The app's home view which uses helper functions to help render the contents.</p>
<div class="fragment"><div class="line">&lt;!DOCTYPE html&gt;</div>
<div class="line">&lt;html&gt;</div>
<div class="line">&lt;head&gt;</div>
<div class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</div>
<div class="line">    &lt;title&gt;Example App - Home&lt;/title&gt;</div>
<div class="line">&lt;/head&gt;</div>
<div class="line">&lt;body&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;!-- Uses built-in `if` helper. --&gt;</div>
<div class="line">  {{#if showTitle}}</div>
<div class="line">    &lt;h1&gt;Home&lt;/h1&gt;</div>
<div class="line">  {{/if}}</div>
<div class="line"> </div>
<div class="line">    &lt;!-- Calls `foo` helper, overridden at render-level. --&gt;</div>
<div class="line">    &lt;p&gt;{{foo}}&lt;/p&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;!-- Calls `bar` helper, defined at instance-level. --&gt;</div>
<div class="line">    &lt;p&gt;{{bar}}&lt;/p&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/body&gt;</div>
<div class="line">&lt;/html&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3114"></a>
More on Helpers</h3>
<p>Refer to the <a href="http://handlebarsjs.com/">Handlebars website</a> for more information on defining helpers:</p>
<ul>
<li><a href="http://handlebarsjs.com/expressions.html#helpers">Expression Helpers</a></li>
<li><a href="http://handlebarsjs.com/block_helpers.html">Block Helpers</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md3115"></a>
Metadata</h2>
<p>Handlebars has a data channel feature that propagates data through all scopes, including helpers and partials. Values in the data channel can be accessed via the <code>{{@variable}}</code> syntax. Express Handlebars provides metadata about a template it renders on a <code>{{@exphbs}}</code> object allowing access to things like the view name passed to <code>res.render()</code> via <code>{{@exphbs.view}}</code>.</p>
<p>The following is the list of metadata that's accessible on the <code>{{@exphbs}}</code> data object:</p>
<ul>
<li><code>cache</code>: Boolean whether or not the template is cached.</li>
<li><code>view</code>: String name of the view passed to <code>res.render()</code>.</li>
<li><code>layout</code>: String name of the layout view.</li>
<li><code>data</code>: Original data object passed when rendering the template.</li>
<li><code>helpers</code>: Collection of helpers used when rendering the template.</li>
<li><code>partials</code>: Collection of partials used when rendering the template.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3116"></a>
API</h1>
<h2><a class="anchor" id="autotoc_md3117"></a>
Configuration and Defaults</h2>
<p>There are two main ways to use this package: via its engine factory function, or creating <code>ExpressHandlebars</code> instances; both use the same configuration properties and defaults.</p>
<div class="fragment"><div class="line">var exphbs = require(&#39;express-handlebars&#39;);</div>
<div class="line"> </div>
<div class="line">// Using the engine factory:</div>
<div class="line">exphbs({ /* config */ });</div>
<div class="line"> </div>
<div class="line">// Create an instance:</div>
<div class="line">exphbs.create({ /* config */ });</div>
</div><!-- fragment --><p>The following is the list of configuration properties and their default values (if any):</p>
<h3><a class="anchor" id="autotoc_md3118"></a>
‘handlebars=require('handlebars’)&lt;tt&gt;</h3>
<p>The Handlebars module/implementation. This allows for theExpressHandlebars` instance to use a different Handlebars module/implementation than that provided by the Handlebars npm package.</p>
<h3><a class="anchor" id="autotoc_md3119"></a>
&lt;tt&gt;extname=".handlebars"&lt;/tt&gt;</h3>
<p>The string name of the file extension used by the templates. This value should correspond with the <code>extname</code> under which this view engine is registered with Express when calling <code>app.engine()</code>.</p>
<p>The following example sets up an Express app to use <code>.hbs</code> as the file extension for views:</p>
<div class="fragment"><div class="line">var express = require(&#39;express&#39;);</div>
<div class="line">var exphbs  = require(&#39;express-handlebars&#39;);</div>
<div class="line"> </div>
<div class="line">var app = express();</div>
<div class="line"> </div>
<div class="line">app.engine(&#39;.hbs&#39;, exphbs({extname: &#39;.hbs&#39;}));</div>
<div class="line">app.set(&#39;view engine&#39;, &#39;.hbs&#39;);</div>
</div><!-- fragment --><p><b>Note:</b> Setting the app's <code>"view engine"</code> setting will make that value the default file extension used for looking up views.</p>
<h3><a class="anchor" id="autotoc_md3120"></a>
&lt;tt&gt;layoutsDir&lt;/tt&gt;</h3>
<p>Default layouts directory is relative to <code>express settings.view</code> + <code>layouts/</code> The string path to the directory where the layout templates reside.</p>
<p><b>Note:</b> If you configure Express to look for views in a custom location (e.g., &lsquo;app.set('views&rsquo;, 'some/path/')<code>), and if your</code>partialsDir<code>is not relative to</code>express settings.view&lt;tt&gt;+layouts/<code>, you will need to reflect that by passing an updated path as the</code>layoutsDir` property in your configuration.</p>
<h3><a class="anchor" id="autotoc_md3121"></a>
&lt;tt&gt;partialsDir&lt;/tt&gt;</h3>
<p>Default partials directory is relative to <code>express settings.view</code> + <code>partials/</code> The string path to the directory where the partials templates reside or object with the following properties:</p>
<ul>
<li><code>dir</code>: The string path to the directory where the partials templates reside.</li>
<li><code>namespace</code>: Optional string namespace to prefix the partial names.</li>
<li><code>templates</code>: Optional collection (or promise of a collection) of templates in the form: <code>{filename: template}</code>.</li>
</ul>
<p><b>Note:</b> If you configure Express to look for views in a custom location (e.g., &lsquo;app.set('views&rsquo;, 'some/path/')<code>), and if your</code>partialsDir<code>is not relative to</code>express settings.view&lt;tt&gt;+partials/<code>, you will need to reflect that by passing an updated path as the</code>partialsDir` property in your configuration.</p>
<p><b>Note:</b> Multiple partials dirs can be used by making <code>partialsDir</code> an array of strings, and/or config objects as described above. The namespacing feature is useful if multiple partials dirs are used and their file paths might clash.</p>
<h3><a class="anchor" id="autotoc_md3122"></a>
&lt;tt&gt;defaultLayout&lt;/tt&gt;</h3>
<p>The string name or path of a template in the <code>layoutsDir</code> to use as the default layout. <code>main</code> is used as the default. This is overridden by a <code>layout</code> specified in the app or response <code>locals</code>. <b>Note:</b> A falsy value will render without a layout; e.g., &lsquo;res.render('home&rsquo;, {layout: false});`.</p>
<h3><a class="anchor" id="autotoc_md3123"></a>
&lt;tt&gt;helpers&lt;/tt&gt;</h3>
<p>An object which holds the helper functions used when rendering templates with this <code>ExpressHandlebars</code> instance. When rendering a template, a collection of helpers will be generated by merging: <code>handlebars.helpers</code> (global), <code>helpers</code> (instance), and <code>options.helpers</code> (render-level). This allows Handlebars' <code>registerHelper()</code> function to operate as expected, will providing two extra levels over helper overrides.</p>
<h3><a class="anchor" id="autotoc_md3124"></a>
&lt;tt&gt;compilerOptions&lt;/tt&gt;</h3>
<p>An object which holds options that will be passed along to the Handlebars compiler functions: <code>Handlebars.compile()</code> and <code>Handlebars.precompile()</code>.</p>
<h2><a class="anchor" id="autotoc_md3125"></a>
Properties</h2>
<p>The public API properties are provided via <code>ExpressHandlebars</code> instances. In additional to the properties listed in the <b>Configuration and Defaults</b> section, the following are additional public properties:</p>
<h3><a class="anchor" id="autotoc_md3126"></a>
&lt;tt&gt;engine&lt;/tt&gt;</h3>
<p>A function reference to the <code>renderView()</code> method which is bound to <code>this</code> <code>ExpressHandlebars</code> instance. This bound function should be used when registering this view engine with an Express app.</p>
<h3><a class="anchor" id="autotoc_md3127"></a>
&lt;tt&gt;extname&lt;/tt&gt;</h3>
<p>The normalized <code>extname</code> which will <em>always</em> start with <code>.</code> and defaults to <code>.handlebars</code>.</p>
<h3><a class="anchor" id="autotoc_md3128"></a>
&lt;tt&gt;compiled&lt;/tt&gt;</h3>
<p>An object cache which holds compiled Handlebars template functions in the format: <code>{"path/to/template": [Function]}</code>.</p>
<h3><a class="anchor" id="autotoc_md3129"></a>
&lt;tt&gt;precompiled&lt;/tt&gt;</h3>
<p>An object cache which holds precompiled Handlebars template strings in the format: <code>{"path/to/template": [String]}</code>.</p>
<h2><a class="anchor" id="autotoc_md3130"></a>
Methods</h2>
<p>The following is the list of public API methods provided via <code>ExpressHandlebars</code> instances:</p>
<p><b>Note:</b> All of the public methods return a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> (with the exception of <code>renderView()</code> which is the interface with Express.)</p>
<h3><a class="anchor" id="autotoc_md3131"></a>
&lt;tt&gt;getPartials([options])&lt;/tt&gt;</h3>
<p>Retrieves the partials in the <code>partialsDir</code> and returns a Promise for an object mapping the partials in the form <code>{name: partial}</code>.</p>
<p>By default each partial will be a compiled Handlebars template function. Use <code>options.precompiled</code> to receive the partials as precompiled templates — this is useful for sharing templates with client code.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>[options]</code>: Optional object containing any of the following properties:<ul>
<li><code>[cache]</code>: Whether cached templates can be used if they have already been requested. This is recommended for production to avoid unnecessary file I/O.</li>
<li><code>[precompiled=false]</code>: Whether precompiled templates should be provided, instead of compiled Handlebars template functions.</li>
</ul>
</li>
</ul>
<p>The name of each partial corresponds to its location in <code>partialsDir</code>. For example, consider the following directory structure:</p>
<div class="fragment"><div class="line">views</div>
<div class="line">└── partials</div>
<div class="line">    ├── foo</div>
<div class="line">    │   └── bar.handlebars</div>
<div class="line">    └── title.handlebars</div>
<div class="line"> </div>
<div class="line">2 directories, 2 files</div>
</div><!-- fragment --><p><code>getPartials()</code> would produce the following result:</p>
<div class="fragment"><div class="line">var hbs = require(&#39;express-handlebars&#39;).create();</div>
<div class="line"> </div>
<div class="line">hbs.getPartials().then(function (partials) {</div>
<div class="line">    console.log(partials);</div>
<div class="line">    // =&gt; { &#39;foo/bar&#39;: [Function],</div>
<div class="line">    // =&gt;    title: [Function] }</div>
<div class="line">});</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3132"></a>
&lt;tt&gt;getTemplate(filePath, [options])&lt;/tt&gt;</h3>
<p>Retrieves the template at the specified <code>filePath</code> and returns a Promise for the compiled Handlebars template function.</p>
<p>Use <code>options.precompiled</code> to receive a precompiled Handlebars template.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>filePath</code>: String path to the Handlebars template file.</li>
<li><code>[options]</code>: Optional object containing any of the following properties:<ul>
<li><code>[cache]</code>: Whether a cached template can be used if it have already been requested. This is recommended for production to avoid necessary file I/O.</li>
<li><code>[precompiled=false]</code>: Whether a precompiled template should be provided, instead of a compiled Handlebars template function.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md3133"></a>
&lt;tt&gt;getTemplates(dirPath, [options])&lt;/tt&gt;</h3>
<p>Retrieves all the templates in the specified <code>dirPath</code> and returns a Promise for an object mapping the compiled templates in the form <code>{filename: template}</code>.</p>
<p>Use <code>options.precompiled</code> to receive precompiled Handlebars templates — this is useful for sharing templates with client code.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>dirPath</code>: String path to the directory containing Handlebars template files.</li>
<li><code>[options]</code>: Optional object containing any of the following properties:<ul>
<li><code>[cache]</code>: Whether cached templates can be used if it have already been requested. This is recommended for production to avoid necessary file I/O.</li>
<li><code>[precompiled=false]</code>: Whether precompiled templates should be provided, instead of a compiled Handlebars template function.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md3134"></a>
&lt;tt&gt;render(filePath, context, [options])&lt;/tt&gt;</h3>
<p>Renders the template at the specified <code>filePath</code> with the <code>context</code>, using this instance's <code>helpers</code> and partials by default, and returns a Promise for the resulting string.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>filePath</code>: String path to the Handlebars template file.</li>
<li><code>context</code>: Object in which the template will be executed. This contains all of the values to fill into the template.</li>
<li><code>[options]</code>: Optional object which can contain any of the following properties which affect this view engine's behavior:<ul>
<li><code>[cache]</code>: Whether a cached template can be used if it have already been requested. This is recommended for production to avoid unnecessary file I/O.</li>
<li><code>[data]</code>: Optional object which can contain any data that Handlebars will pipe through the template, all helpers, and all partials. This is a side data channel.</li>
<li><code>[helpers]</code>: Render-level helpers that will be used instead of any instance-level helpers; these will be merged with (and will override) any global Handlebars helper functions.</li>
<li><code>[partials]</code>: Render-level partials that will be used instead of any instance-level partials. This is used internally as an optimization to avoid re-loading all the partials.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md3135"></a>
&lt;tt&gt;renderView(viewPath, options|callback, [callback])&lt;/tt&gt;</h3>
<p>Renders the template at the specified <code>viewPath</code> as the <code>{{{body}}}</code> within the layout specified by the <code>defaultLayout</code> or <code>options.layout</code>. Rendering will use this instance's <code>helpers</code> and partials, and passes the resulting string to the <code>callback</code>.</p>
<p>This method is called by Express and is the main entry point into this Express view engine implementation. It adds the concept of a "layout" and delegates rendering to the <code>render()</code> method.</p>
<p>The <code>options</code> will be used both as the context in which the Handlebars templates are rendered, and to signal this view engine on how it should behave, e.g., <code>options.cache=false</code> will load <em>always</em> load the templates from disk.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>viewPath</code>: String path to the Handlebars template file which should serve as the <code>{{{body}}}</code> when using a layout.</li>
<li><code>[options]</code>: Optional object which will serve as the context in which the Handlebars templates are rendered. It may also contain any of the following properties which affect this view engine's behavior:<ul>
<li><code>[cache]</code>: Whether cached templates can be used if they have already been requested. This is recommended for production to avoid unnecessary file I/O.</li>
<li><code>[data]</code>: Optional object which can contain any data that Handlebars will pipe through the template, all helpers, and all partials. This is a side data channel.</li>
<li><code>[helpers]</code>: Render-level helpers that will be merged with (and will override) instance and global helper functions.</li>
<li><code>[partials]</code>: Render-level partials will be merged with (and will override) instance and global partials. This should be a <code>{partialName: fn}</code> hash or a Promise of an object with this shape.</li>
<li><code>[layout]</code>: Optional string path to the Handlebars template file to be used as the "layout". This overrides any <code>defaultLayout</code> value. Passing a falsy value will render with no layout (even if a <code>defaultLayout</code> is defined).</li>
</ul>
</li>
<li><code>callback</code>: Function to call once the template is retrieved.</li>
</ul>
<h2><a class="anchor" id="autotoc_md3136"></a>
Hooks</h2>
<p>The following is the list of protected methods that are called internally and serve as <em>hooks</em> to override functionality of <code>ExpressHandlebars</code> instances. A value or a promise can be returned from these methods which allows them to perform async operations.</p>
<h3><a class="anchor" id="autotoc_md3137"></a>
&lt;tt&gt;_compileTemplate(template, options)&lt;/tt&gt;</h3>
<p>This hook will be called when a Handlebars template needs to be compiled. This function needs to return a compiled Handlebars template function, or a promise for one.</p>
<p>By default this hook calls <code>Handlebars.compile()</code>, but it can be overridden to preform operations before and/or after Handlebars compiles the template. This is useful if you wanted to first process Markdown within a Handlebars template.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>template</code>: String Handlebars template that needs to be compiled.</li>
<li><code>options</code>: Object <code>compilerOptions</code> that were specified when the <code>ExpressHandlebars</code> instance as created. This object should be passed along to the <code>Handlebars.compile()</code> function.</li>
</ul>
<h3><a class="anchor" id="autotoc_md3138"></a>
&lt;tt&gt;_precompileTemplate(template, options)&lt;/tt&gt;</h3>
<p>This hook will be called when a Handlebars template needs to be precompiled. This function needs to return a serialized Handlebars template spec. string, or a promise for one.</p>
<p>By default this hook calls <code>Handlebars.precompile()</code>, but it can be overridden to preform operations before and/or after Handlebars precompiles the template. This is useful if you wanted to first process Markdown within a Handlebars template.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>template</code>: String Handlebars template that needs to be precompiled.</li>
<li><code>options</code>: Object <code>compilerOptions</code> that were specified when the <code>ExpressHandlebars</code> instance as created. This object should be passed along to the <code>Handlebars.compile()</code> function.</li>
</ul>
<h3><a class="anchor" id="autotoc_md3139"></a>
&lt;tt&gt;_renderTemplate(template, context, options)&lt;/tt&gt;</h3>
<p>This hook will be called when a compiled Handlebars template needs to be rendered. This function needs to returned the rendered output string, or a promise for one.</p>
<p>By default this hook simply calls the passed-in <code>template</code> with the <code>context</code> and <code>options</code> arguments, but it can be overridden to perform operations before and/or after rendering the template.</p>
<p><b>Parameters:</b></p>
<ul>
<li><code>template</code>: Compiled Handlebars template function to call.</li>
<li><code>context</code>: The context object in which to render the <code>template</code>.</li>
<li><code>options</code>: Object that contains options and metadata for rendering the template:<ul>
<li><code>data</code>: Object to define custom <code>@variable</code> private variables.</li>
<li><code>helpers</code>: Object to provide custom helpers in addition to the globally defined helpers.</li>
<li><code>partials</code>: Object to provide custom partials in addition to the globally defined partials.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md3140"></a>
Examples</h1>
<h2><a class="anchor" id="autotoc_md3141"></a>
&lt;a href="https://github.com/ericf/express-handlebars/tree/master/examples/basic"&gt;Basic Usage&lt;/a&gt;</h2>
<p>This example shows the most basic way to use this view engine.</p>
<h2><a class="anchor" id="autotoc_md3142"></a>
&lt;a href="https://github.com/ericf/express-handlebars/tree/master/examples/advanced"&gt;Advanced Usage&lt;/a&gt;</h2>
<p>This example is more comprehensive and shows how to use many of the features of this view engine, including helpers, partials, multiple layouts, etc.</p>
<p>As noted in the <b>Package Design</b> section, this view engine's implementation is instance-based, and more advanced usages can take advantage of this. The Advanced Usage example demonstrates how to use an <code>ExpressHandlebars</code> instance to share templates with the client, among other features.</p>
<h1><a class="anchor" id="autotoc_md3143"></a>
License</h1>
<p>This software is free to use under the Yahoo! Inc. BSD license. See the <a href="https://github.com/ericf/express-handlebars/blob/master/LICENSE">LICENSE file</a> for license text and copyright information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
